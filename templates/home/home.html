{% extends 'base.html' %} 
{% load static %} 
{% load compress %}

{% block title %}Beranda{% endblock %} 

{% block extra_css %}
  {% compress css %}
  <link rel="stylesheet" href="{% static 'css/home.css' %}" type="text/css" />
  {% endcompress %}
{% endblock %} 

{% block content %}

<div class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 stagger-fade">
        <h1 class="display-4 text-white fade-in">SDI AM FATWA</h1>
        <p class="lead text-white fade-in-up">
          Mencetak Generasi Qur'ani yang Cerdas dan Berakhlak Mulia
        </p>
        <a href="#profil" class="btn btn-warning btn-lg slide-in profile-link">
          Profil Sekolah
        </a>
      </div>
    </div>
  </div>
</div>

<main class="container my-5">
  <section id="profil" class="mb-5 profile-section fade-in" aria-label="Profil Sekolah">
    <h2 class="text-center mb-4 slide-in">Profil Sekolah</h2>
    <div class="profile-content" id="profileContent">
      <div class="row stagger-fade mb-4">
        <div class="col-md-6 mb-4 mb-md-0">
          <img
            src="{% static 'img/sekolah.webp' %}"
            alt="Gedung SDI AM FATWA"
            class="img-fluid rounded shadow lazy-load"
            loading="lazy"
          />
        </div>
        <div class="col-md-6">
          <p class="lead fade-in-up">
            SDI AM FATWA adalah sekolah dasar Islam yang berkomitmen untuk
            memberikan pendidikan berkualitas dengan pendekatan islami.
          </p>
          <p>
            Dengan kurikulum SD Merdeka, kami berusaha mencetak generasi Qur'ani
            yang cerdas, berakhlak mulia, dan siap menghadapi tantangan global.
          </p>
          <p>
            Didukung oleh tenaga pendidik profesional dan fasilitas lengkap, SDI
            AM FATWA menjadi pilihan tepat untuk putra-putri Anda.
          </p>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-12">
          <h4 class="section-title text-center">Visi & Misi Sekolah</h4>
          <div class="row">
            <div class="col-md-6 mb-4">
              <div class="vision-mission-card h-100">
                <div class="vision-header vision-mission-header">
                  <h5 class="mb-0"><i class="fas fa-eye me-2" aria-hidden="true"></i>Visi</h5>
                </div>
                <div class="vision-mission-body">
                  <p class="mb-0">
                    "Terwujudnya generasi Qur'ani yang cerdas, berakhlak mulia,
                    dan siap menghadapi tantangan global."
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6 mb-4">
              <div class="vision-mission-card h-100">
                <div class="mission-header vision-mission-header">
                  <h5 class="mb-0"><i class="fas fa-bullseye me-2" aria-hidden="true"></i>Misi</h5>
                </div>
                <div class="vision-mission-body">
                  <ul class="mb-0 ps-3">
                    <li class="mb-2">
                      Menyelenggarakan pendidikan berkualitas dengan pendekatan
                      islami
                    </li>
                    <li class="mb-2">Membentuk karakter islami yang kuat</li>
                    <li class="mb-2">
                      Mengembangkan potensi siswa secara optimal
                    </li>
                    <li>Menciptakan lingkungan belajar yang Ramah dan modern</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="collapse" id="profilCollapse" aria-labelledby="profilCollapseLabel">
        <div class="profile-expanded-content">
          <div class="mb-4">
            <h4 class="section-title" id="profilCollapseLabel">Sejarah Singkat</h4>
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="row">
                  <div class="col-md-8">
                    <p>
                      SDI AM FATWA didirikan pada tahun 2019 dengan tujuan untuk
                      memberikan pendidikan dasar yang berkualitas dengan
                      pendekatan islami. Sejak berdirinya, sekolah ini telah
                      berkembang pesat dan telah mencetak banyak siswa yang
                      berprestasi.
                    </p>
                    <p class="mb-0">
                      Dengan dukungan dari tenaga pendidik yang profesional dan
                      fasilitas yang lengkap, SDI AM FATWA terus berkomitmen untuk
                      memberikan yang terbaik bagi putra-putri Anda.
                    </p>
                  </div>
                  <div class="col-md-4">
                    <div class="timeline-item">
                      <div class="timeline-year">2019</div>
                      <p>Didirikan</p>
                    </div>
                    <div class="timeline-item">
                      <div class="timeline-year">2020</div>
                      <p>Mencapai akreditasi B</p>
                    </div>
                    <div class="timeline-item">
                      <div class="timeline-year">2023</div>
                      <p>Meraih 1 prestasi tingkat kota</p>
                    </div>
                    <div class="timeline-item">
                      <div class="timeline-year">2024</div>
                      <p>Meraih 7 prestasi Kecamatan</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mb-4">
            <h4 class="section-title">Fasilitas</h4>
            <div class="row">
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="facility-card">
                  <div class="facility-icon">
                    <i class="fas fa-building" aria-hidden="true"></i>
                  </div>
                  <h6 class="mb-2">Ruang Kelas</h6>
                  <p class="small text-muted mb-0">6 ruang kelas nyaman</p>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="facility-card">
                  <div class="facility-icon">
                    <i class="fas fa-book" aria-hidden="true"></i>
                  </div>
                  <h6 class="mb-2">Perpustakaan</h6>
                  <p class="small text-muted mb-0">Koleksi buku Banyak</p>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="facility-card">
                  <div class="facility-icon">
                    <i class="fas fa-restroom" aria-hidden="true"></i>
                  </div>
                  <h6 class="mb-2">Ruang Toilet</h6>
                  <p class="small text-muted mb-0">5 ruangan toilet bersih</p>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="facility-card">
                  <div class="facility-icon">
                    <i class="fas fa-mosque" aria-hidden="true"></i>
                  </div>
                  <h6 class="mb-2">Mushola</h6>
                  <p class="small text-muted mb-0">Untuk ibadah sehari-hari</p>
                </div>
              </div>
              <div class="col-md-3 col-sm-6 mb-3">
                <div class="facility-card">
                  <div class="facility-icon">
                    <i class="fas fa-first-aid" aria-hidden="true"></i>
                  </div>
                  <h6 class="mb-2">Ruang UKS</h6>
                  <p class="small text-muted mb-0">Untuk kesehatan siswa</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center mt-4">
        <button
          class="btn btn-primary px-4"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#profilCollapse"
          aria-expanded="false"
          aria-controls="profilCollapse"
        >
          <span class="btn-text">Selengkapnya</span>
          <i class="fas fa-chevron-down toggle-icon ms-2" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </section>

  <section class="mb-5" aria-label="Berita Terbaru">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Berita Terbaru</h2>
      <a href="{% url 'berita_list' %}" class="btn btn-outline-primary" aria-label="Lihat semua berita">
        Lihat Semua
      </a>
    </div>
    <div class="row">
      {% for berita in berita_terbaru %}
      <div class="col-md-4 mb-4">
        <article class="card berita-card">
          <div class="berita-card-img-container">
            {% if berita.gambar %}
            <img
              src="{{ berita.gambar.url }}"
              class="berita-card-img"
              alt="{{ berita.judul }}"
              loading="lazy"
            />
            {% else %}
            <img
              src="{% static 'img/default-berita.jpg' %}"
              class="berita-card-img"
              alt="Gambar default berita"
              loading="lazy"
            />
            {% endif %}
          </div>
          <div class="card-body d-flex flex-column">
            <span class="badge bg-primary mb-2 align-self-start">
              {{ berita.get_kategori_display }}
            </span>
            <h5 class="card-title">{{ berita.judul }}</h5>
            <p class="card-text">{{ berita.isi|truncatewords_html:20|safe }}</p>
            <div class="mt-auto">
              <small class="text-muted">
                <i class="far fa-calendar me-1" aria-hidden="true"></i> 
                <time datetime="{{ berita.tanggal_publikasi|date:'Y-m-d' }}">
                  {{ berita.tanggal_publikasi|date:"j F Y" }}
                </time> 
                oleh {{ berita.author.get_full_name|default:berita.author.username }}
              </small>
              <a
                href="{% url 'berita_detail' berita.id %}"
                class="btn btn-sm btn-primary float-end"
                aria-label="Baca selengkapnya tentang {{ berita.judul }}"
              >Baca Selengkapnya</a
              >
            </div>
          </div>
        </article>
      </div>
      {% empty %}
      <div class="col-12">
        <div class="alert alert-info text-center py-4" role="alert">
          <i class="fas fa-newspaper fa-3x mb-3 d-block text-center" aria-hidden="true"></i>
          <h5>Belum ada berita terbaru</h5>
          <p>Silakan kunjungi lagi nanti untuk melihat berita terbaru dari kami.</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <section class="mb-5" aria-label="Agenda Mendatang">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Agenda Mendatang</h2>
      <a
        href="{% url 'agenda_list' %}?filter=mendatang"
        class="btn btn-outline-primary"
        aria-label="Lihat semua agenda"
      >Lihat Semua</a
      >
    </div>
    <div class="row">
      {% for agenda in agenda_mendatang %}
      <div class="col-md-4 mb-4">
        <article class="card agenda-card">
          <div class="card-body">
            <h5 class="card-title">{{ agenda.judul }}</h5>
            <p class="card-text">{{ agenda.deskripsi|truncatewords:15 }}</p>
            <p class="mb-1">
              <i class="fas fa-calendar-alt text-primary me-2" aria-hidden="true"></i> 
              <time datetime="{{ agenda.tanggal_mulai|date:'Y-m-d\TH:i' }}">
                {{ agenda.tanggal_mulai|date:"d M Y H:i" }}
              </time>
            </p>
            <p class="mb-0">
              <i class="fas fa-map-marker-alt text-primary me-2" aria-hidden="true"></i> 
              <span>{{ agenda.lokasi }}</span>
            </p>
          </div>
        </article>
      </div>
      {% empty %}
      <div class="col-12">
        <div class="alert alert-info text-center py-4" role="alert">
          <i class="fas fa-calendar-alt fa-3x mb-3 d-block text-center" aria-hidden="true"></i>
          <h5>Tidak ada agenda mendatang</h5>
          <p>Silakan kunjungi lagi nanti untuk melihat agenda terbaru dari kami.</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <section class="mb-5 bg-light py-5 rounded" aria-label="Statistik Sekolah">
    <h2 class="text-center mb-4">Statistik Sekolah</h2>
    <div class="row">
      <div class="col-md-3 text-center">
        <div class="stat-item">
          <i class="fas fa-users fa-3x text-primary mb-3" aria-hidden="true"></i>
          <h3>45+</h3>
          <p>Siswa Aktif</p>
        </div>
      </div>
      <div class="col-md-3 text-center">
        <div class="stat-item">
          <i class="fas fa-chalkboard-teacher fa-3x text-primary mb-3" aria-hidden="true"></i>
          <h3>10+</h3>
          <p>Tenaga Pendidik</p>
        </div>
      </div>
      <div class="col-md-3 text-center">
        <div class="stat-item">
          <i class="fas fa-trophy fa-3x text-primary mb-3" aria-hidden="true"></i>
          <h3>10+</h3>
          <p>Prestasi</p>
        </div>
      </div>
      <div class="col-md-3 text-center">
        <div class="stat-item">
          <i class="fas fa-building fa-3x text-primary mb-3" aria-hidden="true"></i>
          <h3>6</h3>
          <p>Ruang Kelas</p>
        </div>
      </div>
    </div>
  </section>

  <section class="mb-5 bg-gradient-primary text-white py-5 rounded" aria-label="Pendaftaran">
    <div class="container text-center">
      <h2 class="mb-4">Daftarkan Putra-Putri Anda Sekarang!</h2>
      <p class="lead mb-4">
        Bergabunglah dengan SDI AM FATWA dan berikan pendidikan terbaik untuk masa
        depan anak Anda.
      </p>
      <a
        href="https://wa.me/6283805530371"
        class="btn btn-warning btn-lg btn-daftar"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Hubungi kami via WhatsApp untuk pendaftaran"
      >
        <i class="fab fa-whatsapp me-2" aria-hidden="true"></i> Hubungi Sekarang
      </a>
    </div>
  </section>
</main>
{% endblock %}

